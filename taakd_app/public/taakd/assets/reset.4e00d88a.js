import{v as F,X as S,r as n,d as U,L as z,g as A,o as w,K as D,w as o,j as t,i as s,n as u,t as b,u as i,z as c,p as k,h as C,R as L,Y as P,Z as I,_ as M,A as H}from"./vendor.1aaec15d.js";import{H as v,B as Y,a as $}from"./baseLayout.1e35d91b.js";import{s as f}from"./index.b3db4008.js";import{c as K,u as W}from"./request.2b065dce.js";import"./button.3122b5b4.js";const X={class:"pb-5"},Z={class:"py-5"},G={class:"py-3 lg:w-1/2"},J={key:0,class:"text-red-500"},O={class:"py-3 lg:w-1/2"},Q={key:0,class:"text-red-500"},ee={class:"py-5"},se={class:"flex items-start gap-1 py-2"},te={class:"flex gap-1 py-2"},ae={class:"pt-5 flex w-full justify-center"},oe={__name:"reset",setup(le){const j=K(["name","user_id","subscribe_to_text_messages"]),_=S().query.fullName||"\u0645\u0633\u062A\u062E\u062F\u0645",d=n(""),l=n(""),m=n(""),x=n(!0),a=n(""),g=n(!0),q=n(!0),B={subscribe_to_text_messages:g.value},N=p=>/[\u0600-\u06FF]/.test(p),R=U({doctype:"User",fields:["email","username","full_name","new_password","name","first_name"],filters:{email:f.user},auto:!0,onSuccess(p){W(j,B)},setValue:{onSuccess(p){f.logout.submit()},onError(p){}}});function T(){if(!f.user){console.error("Session user is not defined");return}R.setValue.submit({name:f.user,new_password:l.value,create_new_password:q.value})}const y=()=>{a.value=d.value===l.value?"":"Passwords do not match",x.value=d.value===""||l.value===""||a.value!==""},E=()=>{d.value===l.value?T():a.value="Passwords do not match"};function V(){g.value=m.value==="yes"}return z([d,l],y),(p,e)=>{const h=A("Label");return w(),D($,null,{default:o(()=>[t(Y,null,{default:o(()=>[s("div",X,[t(v,{tag:"h1",level:"primary"},{default:o(()=>e[4]||(e[4]=[u("A warm welcome from Taakd.")])),_:1}),t(v,{tag:"h2",level:"secondary-2",class:"mt-1"},{default:o(()=>e[5]||(e[5]=[u(" Let\u2019s set up your account. All fields below are required. ")])),_:1})]),s("p",{class:c(["my-5",{"text-right":N(i(_)),"text-left":!N(i(_))}])},b(i(_)),3),s("form",{onSubmit:H(E,["prevent"])},[s("div",Z,[t(v,{class:"my-1",tag:"h3",level:"secondary-2"},{default:o(()=>e[6]||(e[6]=[u("Create New Password")])),_:1}),s("div",G,[t(i(k),{type:"password",size:"sm",variant:"subtle",placeholder:"Enter password",label:"Enter password",modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value=r),class:c({"border-red-500":a.value}),onInput:y},null,8,["modelValue","class"]),a.value?(w(),C("p",J,b(a.value),1)):L("",!0)]),s("div",O,[t(i(k),{type:"password",size:"sm",variant:"subtle",placeholder:"Confirm password",label:"Confirm Password",modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r),class:c({"border-red-500":a.value}),onInput:y,required:""},null,8,["modelValue","class"]),a.value?(w(),C("p",Q,b(a.value),1)):L("",!0)])]),s("div",ee,[t(v,{class:"my-1",tag:"h3",level:"secondary-2"},{default:o(()=>e[7]||(e[7]=[u("Text notifications")])),_:1}),e[12]||(e[12]=s("p",{class:"text-sm font-medium"},"Would you like to subscribe to text messages for notifications and password resets?",-1)),s("div",null,[s("div",se,[P(s("input",{type:"radio",name:"textNotifications",value:"yes","onUpdate:modelValue":e[2]||(e[2]=r=>m.value=r),onChange:V},null,544),[[I,m.value]]),t(h,{class:"block"},{default:o(()=>e[8]||(e[8]=[u(" Yes, ")])),_:1}),e[9]||(e[9]=s("p",{class:"mt-1"},"I acknowledge and agree that I may receive texts for notifications and password resets, and that standard data and text charges may apply.",-1))]),s("div",te,[P(s("input",{type:"radio",name:"textNotifications",value:"no","onUpdate:modelValue":e[3]||(e[3]=r=>m.value=r),onChange:V},null,544),[[I,m.value]]),t(h,{class:"block"},{default:o(()=>e[10]||(e[10]=[u(" No, ")])),_:1}),e[11]||(e[11]=s("p",{class:"mt-1"},"I acknowledge and agree that I may receive texts for notifications and password resets, and that standard data and text charges may apply.",-1))])])]),s("div",ae,[t(i(M),{type:"submit",disabled:x.value,label:"Next ->",class:c(["bg-secondary hover:bg-secondary_hover px-4 py-2 text-white"])},null,8,["disabled"])])],32)]),_:1})]),_:1})}}};var ce=F(oe,[["__scopeId","data-v-1e4f47aa"]]);export{ce as default};
