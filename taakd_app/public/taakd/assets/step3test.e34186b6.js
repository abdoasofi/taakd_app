var B=(D,E,d)=>new Promise((I,x)=>{var N=y=>{try{v(d.next(y))}catch(s){x(s)}},m=y=>{try{v(d.throw(y))}catch(s){x(s)}},v=y=>y.done?I(y.value):Promise.resolve(y.value).then(N,m);v((d=d.apply(D,E)).next())});import{v as W,D as Q,b as X,L as Z,a as H,r as ee,o as r,h as l,i as t,u,H as b,J as k,K as c,E as p,R as _,t as U,z as oe,j as te,w as ae,Y as i,a0 as ne,a1 as g,$ as q,a2 as h,W as se,M as re}from"./vendor.1aaec15d.js";import{l as T}from"./useAddressLogic.ac071cda.js";import{u as ie}from"./index.408ed4ba.js";const le={class:"pt-3 container"},de={dir:"ltr",class:"p-6 bg-bg min-h-screen"},ue={key:0,class:"max-w-7xl mx-auto bg-bg shadow-md rounded-lg p-6"},_e={key:0,class:"mb-4 space-y-2"},ce={class:"space-y-4"},pe={class:"flex justify-between items-center px-4 py-2 bg-more_lighter_gray hover:bg-bg rounded-t-md"},fe=["id","onClick","aria-expanded","aria-controls"],ye={class:"text-dark_gray"},ge=["onClick"],me=["id","aria-labelledby"],he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve=["onUpdate:modelValue","onInput"],be=["onUpdate:modelValue","onInput"],ke=["onUpdate:modelValue","onChange"],xe={class:"flex items-center"},we=["onUpdate:modelValue"],Ve=["onUpdate:modelValue","onChange"],Ce=["value"],Ue=["onUpdate:modelValue","onChange"],qe=["value"],Ee=["onUpdate:modelValue","onChange"],Ie=["value"],Ne=["onUpdate:modelValue","onInput"],Te=["onUpdate:modelValue","onInput"],De=["onUpdate:modelValue","onInput"],$e=["onUpdate:modelValue"],Se={class:"flex items-center"},Re=["onUpdate:modelValue"],je={class:"flex items-center"},Pe=["onUpdate:modelValue"],Fe={class:"flex items-center"},Ye=["onUpdate:modelValue"],Ge={class:"flex items-center"},Le=["onUpdate:modelValue"],Me={key:0},Ae=["onUpdate:modelValue","onInput"],Be=["onUpdate:modelValue","onInput"],He={class:"flex items-center"},Oe=["onUpdate:modelValue"],ze={key:1},Je=["onUpdate:modelValue","onInput"],Ke={class:"flex justify-center items-center mt-6 space-x-4"},We=["disabled"],Qe={key:0},Xe={key:1},Ze={key:1,class:"flex justify-center items-center h-full"},eo={__name:"step3test",setup(D){const E=ie(),d=Q({doctype:"Verification Instructions Request",name:"VIR-2024-26-09-000007"}),I=X(()=>T.data.filter(n=>n.location_type==="Country").map(n=>({label:n.location_name,value:n.location_name}))),x=n=>n?T.data.filter(e=>e.location_type==="City"&&e.parent_location===n).map(e=>({label:e.location_name,value:e.location_name})):[],N=n=>n?T.data.filter(e=>e.location_type==="Governorate"&&e.parent_location===n).map(e=>({label:e.location_name,value:e.location_name})):[];Z(()=>d.doc,n=>{n&&!n.employment_history&&(n.employment_history=[])},{immediate:!0});const m=H({}),v=n=>{m[n]=!m[n]},y=n=>m[n],s=H({}),O=()=>{const n={company:"",name_of_your_employer:"",type_of_employment:"",continuous:!1,country:"",city:"",governorate:"",from_date:"",to_date:"",phone:"",ext:"",do_we_have_permission_to_contact_this_current_employer:!1,issuing_salary:!1,activity_has_stopped:!1,the_company_has_different_names:!1,different_company_names:"",name_of_the_last_position_you_held:"",you_have_a_nicknamecx:!1,nickname:""};d.doc.employment_history.push(n),re(()=>{m[n.id]=!0})},z=n=>{confirm("Are you sure you want to delete this employment record?")&&J(n)},J=n=>{const e=d.doc.employment_history.findIndex(o=>o.id===n);e!==-1&&(d.doc.employment_history.splice(e,1),delete m[n])},w=ee(!1),K=()=>B(this,null,function*(){const n={};if(d.doc.employment_history.forEach(e=>{n[e.id]={},e.company||(n[e.id].company="Company is required."),e.name_of_your_employer||(n[e.id].name_of_your_employer="Name of Your Employer is required."),e.type_of_employment||(n[e.id].type_of_employment="Type of Employment is required."),e.country||(n[e.id].country="Country is required."),e.city||(n[e.id].city="City is required."),e.governorate||(n[e.id].governorate="Governorate is required."),e.from_date||(n[e.id].from_date="From Date is required."),!e.continuous&&!e.to_date&&(n[e.id].to_date="To Date is needed unless marked as continuous."),e.phone||(n[e.id].phone="Phone is required."),e.the_company_has_different_names&&!e.different_company_names&&(n[e.id].different_company_names="Different Company Names are required."),e.you_have_a_nicknamecx&&!e.nickname&&(n[e.id].nickname="Nickname is required.")}),s.value=n,!Object.keys(n).some(e=>Object.keys(n[e]).length>0)){w.value=!0;try{yield d.setValue.submit({employment_history:d.doc.employment_history}),E.success("Request has been successfully saved!")}catch(e){s.global||(s.global=[]),s.global.push(`An error occurred while saving the request: ${e.message}`)}finally{w.value=!1}}}),f=(n,e)=>{s[n]||(s[n]={});const o=d.doc.employment_history.find(V=>V.id===n);e==="company"?s[n].company=o.company?"":"Company is required.":e==="name_of_your_employer"?s[n].name_of_your_employer=o.name_of_your_employer?"":"Name of Your Employer is required.":e==="type_of_employment"?s[n].type_of_employment=o.type_of_employment?"":"Type of Employment is required.":e==="country"?s[n].country=o.country?"":"Country is required.":e==="city"?s[n].city=o.city?"":"City is required.":e==="governorate"?s[n].governorate=o.governorate?"":"Governorate is required.":e==="from_date"?s[n].from_date=o.from_date?"":"From Date is required.":e==="to_date"?s[n].to_date=o.to_date?"":"To Date is required unless marked as continuous.":e==="phone"?s[n].phone=o.phone?"":"Phone is required.":e==="different_company_names"?s[n].different_company_names=o.different_company_names?"":"Different Company Names are required if applicable.":e==="nickname"&&(s[n].nickname=o.nickname?"":"Nickname is required if applicable.")};return(n,e)=>(r(),l("div",le,[e[25]||(e[25]=t("h3",{class:"text-lg font-medium mb-3 text-black"},"Employment History",-1)),t("div",de,[u(d).doc?(r(),l("div",ue,[s.global&&s.global.length>0?(r(),l("div",_e,[(r(!0),l(b,null,k(s.global,(o,V)=>(r(),c(u(p),{key:"global-"+V,message:o},null,8,["message"]))),128))])):_("",!0),t("div",ce,[(r(!0),l(b,null,k(u(d).doc.employment_history,(o,V)=>(r(),l("div",{key:o.id,class:"border border-light_gray rounded-md"},[t("div",pe,[t("button",{id:"section-button-"+o.id,onClick:C=>v(o.id),"aria-expanded":y(o.id),"aria-controls":"section-content-"+o.id,class:"flex items-center space-x-2 focus:outline-none"},[t("span",ye,U(o.name_of_your_employer||"New Employment Record"),1),(r(),l("svg",{class:oe([{"transform rotate-180":y(o.id)},"w-5 h-5 transition-transform duration-200"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e[0]||(e[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],8,fe),t("button",{onClick:C=>z(o.id),class:"bg-warn hover:bg-warn_hover text-white px-2 py-1 rounded-md",title:"Delete Record"}," Delete ",8,ge)]),te(se,{name:"accordion"},{default:ae(()=>{var C,$,S,R,j,P,F,Y,G,L,M,A;return[i(t("div",{class:"p-4 space-y-4",id:"section-content-"+o.id,role:"region","aria-labelledby":"section-button-"+o.id},[t("div",he,[t("div",null,[e[1]||(e[1]=t("label",{class:"block text-dark_gray"},"Company",-1)),i(t("input",{"onUpdate:modelValue":a=>o.company=a,placeholder:"Company",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"company")},null,40,ve),[[g,o.company]]),((C=s[o.id])==null?void 0:C.company)?(r(),c(u(p),{key:0,message:s[o.id].company},null,8,["message"])):_("",!0)]),t("div",null,[e[2]||(e[2]=t("label",{class:"block text-dark_gray"},"Name of Your Employer",-1)),i(t("input",{"onUpdate:modelValue":a=>o.name_of_your_employer=a,placeholder:"Name of Your Employer",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"name_of_your_employer")},null,40,be),[[g,o.name_of_your_employer]]),(($=s[o.id])==null?void 0:$.name_of_your_employer)?(r(),c(u(p),{key:0,message:s[o.id].name_of_your_employer},null,8,["message"])):_("",!0)]),t("div",null,[e[4]||(e[4]=t("label",{class:"block text-dark_gray"},"Type of Employment",-1)),i(t("select",{"onUpdate:modelValue":a=>o.type_of_employment=a,class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onChange:a=>f(o.id,"type_of_employment")},e[3]||(e[3]=[t("option",{value:""},"Select Type",-1),t("option",{value:"Full-Time"},"Full-Time",-1),t("option",{value:"Part-Time"},"Part-Time",-1),t("option",{value:"Contract"},"Contract",-1),t("option",{value:"Internship"},"Internship",-1)]),40,ke),[[q,o.type_of_employment]]),((S=s[o.id])==null?void 0:S.type_of_employment)?(r(),c(u(p),{key:0,message:s[o.id].type_of_employment},null,8,["message"])):_("",!0)]),t("div",xe,[e[5]||(e[5]=t("label",{class:"mr-2 text-dark_gray"},"Continuous",-1)),i(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.continuous=a,class:"h-4 w-4 text-primary focus:ring-primary border-light_gray rounded"},null,8,we),[[h,o.continuous]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-dark_gray"},"Country",-1)),i(t("select",{"onUpdate:modelValue":a=>o.country=a,onChange:()=>{o.city="",f(o.id,"country")},class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},[e[6]||(e[6]=t("option",{value:""},"Select Country",-1)),(r(!0),l(b,null,k(I.value,a=>(r(),l("option",{key:a.value,value:a.value},U(a.label),9,Ce))),128))],40,Ve),[[q,o.country]]),((R=s[o.id])==null?void 0:R.country)?(r(),c(u(p),{key:0,message:s[o.id].country},null,8,["message"])):_("",!0)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-dark_gray"},"City",-1)),i(t("select",{"onUpdate:modelValue":a=>o.city=a,onChange:a=>f(o.id,"city"),class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},[e[8]||(e[8]=t("option",{value:""},"Select City",-1)),(r(!0),l(b,null,k(x(o.country),a=>(r(),l("option",{key:a.value,value:a.value},U(a.label),9,qe))),128))],40,Ue),[[q,o.city]]),((j=s[o.id])==null?void 0:j.city)?(r(),c(u(p),{key:0,message:s[o.id].city},null,8,["message"])):_("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-dark_gray"},"Governorate",-1)),i(t("select",{"onUpdate:modelValue":a=>o.governorate=a,class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onChange:a=>f(o.id,"governorate")},[e[10]||(e[10]=t("option",{value:""},"Select Governorate",-1)),(r(!0),l(b,null,k(N(o.city),a=>(r(),l("option",{key:a.value,value:a.value},U(a.label),9,Ie))),128))],40,Ee),[[q,o.governorate]]),((P=s[o.id])==null?void 0:P.governorate)?(r(),c(u(p),{key:0,message:s[o.id].governorate},null,8,["message"])):_("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-dark_gray"},"From Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":a=>o.from_date=a,class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"from_date")},null,40,Ne),[[g,o.from_date]]),((F=s[o.id])==null?void 0:F.from_date)?(r(),c(u(p),{key:0,message:s[o.id].from_date},null,8,["message"])):_("",!0)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-dark_gray"},"To Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":a=>o.to_date=a,class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"to_date")},null,40,Te),[[g,o.to_date]]),((Y=s[o.id])==null?void 0:Y.to_date)?(r(),c(u(p),{key:0,message:s[o.id].to_date},null,8,["message"])):_("",!0)]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-dark_gray"},"Phone",-1)),i(t("input",{type:"tel","onUpdate:modelValue":a=>o.phone=a,placeholder:"Phone",pattern:"[0-9]{10,15}",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"phone")},null,40,De),[[g,o.phone]]),((G=s[o.id])==null?void 0:G.phone)?(r(),c(u(p),{key:0,message:s[o.id].phone},null,8,["message"])):_("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-dark_gray"},"Extension",-1)),i(t("input",{"onUpdate:modelValue":a=>o.Ext=a,placeholder:"Extension",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},null,8,$e),[[g,o.Ext]])]),t("div",Se,[e[16]||(e[16]=t("label",{class:"mr-2 text-dark_gray"},"Do we have permission to contact this current employer?",-1)),i(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.do_we_have_permission_to_contact_this_current_employer=a,class:"h-4 w-4 text-primary focus:ring-primary border-light_gray rounded"},null,8,Re),[[h,o.do_we_have_permission_to_contact_this_current_employer]])]),t("div",je,[e[17]||(e[17]=t("label",{class:"mr-2 text-dark_gray"},"Issuing Salary",-1)),i(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.issuing_salary=a,class:"h-4 w-4 text-primary focus:ring-primary border-light_gray rounded"},null,8,Pe),[[h,o.issuing_salary]])]),t("div",Fe,[e[18]||(e[18]=t("label",{class:"mr-2 text-dark_gray"},"Activity Has Stopped",-1)),i(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.activity_has_stopped=a,class:"h-4 w-4 text-primary focus:ring-primary border-light_gray rounded"},null,8,Ye),[[h,o.activity_has_stopped]])]),t("div",Ge,[e[19]||(e[19]=t("label",{class:"mr-2 text-dark_gray"},"The company has different names",-1)),i(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.the_company_has_different_names=a,class:"h-4 w-4 text-primary focus:ring-primary border-light_gray rounded"},null,8,Le),[[h,o.the_company_has_different_names]])]),o.the_company_has_different_names?(r(),l("div",Me,[e[20]||(e[20]=t("label",{class:"block text-dark_gray"},"Different Company Names",-1)),i(t("input",{"onUpdate:modelValue":a=>o.different_company_names=a,placeholder:"Different Company Names",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"different_company_names")},null,40,Ae),[[g,o.different_company_names]]),((L=s[o.id])==null?void 0:L.different_company_names)?(r(),c(u(p),{key:0,message:s[o.id].different_company_names},null,8,["message"])):_("",!0)])):_("",!0),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-dark_gray"},"Name of the Last Position You Held",-1)),i(t("input",{"onUpdate:modelValue":a=>o.name_of_the_last_position_you_held=a,placeholder:"Last Position Held",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"name_of_the_last_position_you_held")},null,40,Be),[[g,o.name_of_the_last_position_you_held]]),((M=s[o.id])==null?void 0:M.name_of_the_last_position_you_held)?(r(),c(u(p),{key:0,message:s[o.id].name_of_the_last_position_you_held},null,8,["message"])):_("",!0)]),t("div",He,[e[22]||(e[22]=t("label",{class:"mr-2 text-dark_gray"},"You have a nickname?",-1)),i(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.you_have_a_nicknamecx=a,class:"h-4 w-4 text-primary focus:ring-primary border-light_gray rounded"},null,8,Oe),[[h,o.you_have_a_nicknamecx]])]),o.you_have_a_nicknamecx?(r(),l("div",ze,[e[23]||(e[23]=t("label",{class:"block text-dark_gray"},"Nickname",-1)),i(t("input",{"onUpdate:modelValue":a=>o.nickname=a,placeholder:"Nickname",class:"w-full px-3 py-2 border-light_gray rounded-md focus:outline-none focus:ring-2 focus:ring-primary",onInput:a=>f(o.id,"nickname")},null,40,Je),[[g,o.nickname]]),((A=s[o.id])==null?void 0:A.nickname)?(r(),c(u(p),{key:0,message:s[o.id].nickname},null,8,["message"])):_("",!0)])):_("",!0)])],8,me),[[ne,y(o.id)]])]}),_:2},1024)]))),128))]),t("div",Ke,[t("button",{onClick:O,class:"bg-primary hover:bg-primary_hover text-white px-4 py-2 rounded-md"}," Add Employment Record "),t("button",{onClick:K,disabled:w.value,class:"bg-secondary hover:bg-secondary_hover text-white px-4 py-2 rounded-md"},[w.value?(r(),l("span",Xe,"Saving...")):(r(),l("span",Qe,"Save Request"))],8,We)])])):(r(),l("div",Ze,e[24]||(e[24]=[t("p",{class:"text-dark_gray"},"Loading...",-1)])))])]))}};var so=W(eo,[["__scopeId","data-v-4b322ea6"]]);export{so as default};
