var v=(f,d,t)=>new Promise((c,u)=>{var m=e=>{try{r(t.next(e))}catch(o){u(o)}},_=e=>{try{r(t.throw(e))}catch(o){u(o)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(m,_);r((t=t.apply(f,d)).next())});import{D as k,b as j,L as E,a as M,o as y,h as g,i as n,H as x,J as q,K as B,w as i,j as s,n as V,u as U,M as $}from"./vendor.1aaec15d.js";import{u as w}from"./index.408ed4ba.js";import{B as b}from"./button.3122b5b4.js";import{_ as A,v as F}from"./select.vue_vue_type_style_index_0_scoped_true_lang.cfa49241.js";import{S as C,F as p,A as I}from"./autocomp.7a0b5387.js";import{l as T}from"./useAddressLogic.ac071cda.js";const N={class:"space-y-2"},R={class:"lg:grid grid-cols-2 lg:gap-2"},Y={class:"flex justify-end py-2"},L={class:"flex justify-center py-3"},O={__name:"Step_3",setup(f){const d=w(),t=k({doctype:"Verification Instructions Request",name:"VIR-2024-26-09-000007"}),c=j(()=>T.data?T.data.filter(e=>e.location_type==="Country").map(e=>({label:e.location_name,value:e.location_name})):(console.warn("Location data is not yet available."),[])),u=e=>{};E(()=>t.doc,e=>{e&&(e.employment_history||(e.employment_history=[]))},{immediate:!0}),(!t.doc||!t.doc.employment_history)&&(t.doc?t.doc.employment_history=[]:t.doc={employment_history:[]});const m=M({}),_=()=>{const e={id:F(),company:"",name_of_your_employer:"",type_of_employment:"",continuous:!1,country:"",city:"",governorate:"",from_date:"",to_date:"",phone:"",ext:"",do_we_have_permission_to_contact_this_current_employer:!1,issuing_salary:!1,activity_has_stopped:!1,the_company_has_different_names:!1,different_company_names:"",name_of_the_last_position_you_held:"",you_have_a_nicknamecx:!1,nickname:"",file:null};t.doc.employment_history.push(e),$(()=>{m[e.id]=!0})},r=()=>v(this,null,function*(){try{yield t.setValue.submit({employment_history:t.doc.employment_history}),d.success("Request has been successfully saved!")}catch(e){console.error("Failed to save the request:",e),d.error("Failed to save the request.")}});return(e,o)=>(y(),g(x,null,[o[3]||(o[3]=n("div",{class:"pt-3 container"},[n("h3",{class:"text-lg font-medium mb-3 text-black"},"Employment History")],-1)),n("div",N,[(y(!0),g(x,null,q(U(t).doc.employment_history,(a,h)=>(y(),B(A,{key:a.id,title:a.company||`Employment ${h+1}`},{default:i(()=>[n("div",R,[s(p,null,{default:i(()=>[s(C,{labelText:"Company",isMandatory:!0,infoText:"Company",inputType:"text",name:"company",id:`company-${a.id}`,modelValue:a.company,"onUpdate:modelValue":l=>a.company=l,isValid:!1,validationMessage:"You can edit the message."},null,8,["id","modelValue","onUpdate:modelValue"])]),_:2},1024),s(p,null,{default:i(()=>[s(C,{labelText:"Name of Your Employer",isMandatory:!0,infoText:"Name of Your Employer",inputType:"text",name:"name_of_your_employer",id:`name_of_your_employer-${a.id}`,modelValue:a.name_of_your_employer,"onUpdate:modelValue":l=>a.name_of_your_employer=l,isValid:!1,validationMessage:"You can edit the message."},null,8,["id","modelValue","onUpdate:modelValue"])]),_:2},1024),s(p,null,{default:i(()=>[s(I,{labelText:"Country",isMandatory:!0,infoText:"Country",inputType:"text",name:"country",id:`country-${a.id}`,options:c.value,modelValue:a.country,"onUpdate:modelValue":l=>a.country=l,onInputChange:l=>u(h),isValid:!1,validationMessage:"You can edit the message."},null,8,["id","options","modelValue","onUpdate:modelValue","onInputChange"])]),_:2},1024)]),o[1]||(o[1]=n("div",{class:"lg:grid grid-cols-2 lg:gap-2"},null,-1)),n("div",Y,[s(b,{level:"danger",onClicked:r},{default:i(()=>o[0]||(o[0]=[V("Add")])),_:1})])]),_:2},1032,["title"]))),128)),n("div",L,[s(b,{level:"secondary",onClicked:_},{default:i(()=>o[2]||(o[2]=[V("+ Add Employment History")])),_:1})])])],64))}};export{O as default};
